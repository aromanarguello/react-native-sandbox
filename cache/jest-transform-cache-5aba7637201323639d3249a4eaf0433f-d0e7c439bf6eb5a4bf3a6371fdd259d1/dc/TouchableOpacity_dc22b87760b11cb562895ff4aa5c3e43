0d4c82e8ff0198cc2d232e62bb6eb487
'use strict';

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { (0, _defineProperty2.default)(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }

var Animated = require("../../Animated/src/Animated");

var Easing = require("../../Animated/src/Easing");

var NativeMethodsMixin = require("../../Renderer/shims/NativeMethodsMixin");

var Platform = require("../../Utilities/Platform");

var React = require('react');

var PropTypes = require('prop-types');

var Touchable = require("./Touchable");

var TouchableWithoutFeedback = require("./TouchableWithoutFeedback");

var createReactClass = require('create-react-class');

var ensurePositiveDelayProps = require("./ensurePositiveDelayProps");

var flattenStyle = require("../../StyleSheet/flattenStyle");

var PRESS_RETENTION_OFFSET = {
  top: 20,
  left: 20,
  right: 20,
  bottom: 30
};
var TouchableOpacity = createReactClass({
  displayName: 'TouchableOpacity',
  mixins: [Touchable.Mixin.withoutDefaultFocusAndBlur, NativeMethodsMixin],
  propTypes: _objectSpread({}, TouchableWithoutFeedback.propTypes, {
    activeOpacity: PropTypes.number,
    hasTVPreferredFocus: PropTypes.bool,
    tvParallaxProperties: PropTypes.object
  }),
  getDefaultProps: function getDefaultProps() {
    return {
      activeOpacity: 0.2
    };
  },
  getInitialState: function getInitialState() {
    return _objectSpread({}, this.touchableGetInitialState(), {
      anim: new Animated.Value(this._getChildStyleOpacityWithDefault())
    });
  },
  componentDidMount: function componentDidMount() {
    ensurePositiveDelayProps(this.props);
  },
  UNSAFE_componentWillReceiveProps: function UNSAFE_componentWillReceiveProps(nextProps) {
    ensurePositiveDelayProps(nextProps);
  },
  componentDidUpdate: function componentDidUpdate(prevProps, prevState) {
    if (this.props.disabled !== prevProps.disabled) {
      this._opacityInactive(250);
    }
  },
  setOpacityTo: function setOpacityTo(value, duration) {
    Animated.timing(this.state.anim, {
      toValue: value,
      duration: duration,
      easing: Easing.inOut(Easing.quad),
      useNativeDriver: true
    }).start();
  },
  touchableHandleActivePressIn: function touchableHandleActivePressIn(e) {
    if (e.dispatchConfig.registrationName === 'onResponderGrant') {
      this._opacityActive(0);
    } else {
      this._opacityActive(150);
    }

    this.props.onPressIn && this.props.onPressIn(e);
  },
  touchableHandleActivePressOut: function touchableHandleActivePressOut(e) {
    this._opacityInactive(250);

    this.props.onPressOut && this.props.onPressOut(e);
  },
  touchableHandleFocus: function touchableHandleFocus(e) {
    if (Platform.isTV) {
      this._opacityActive(150);
    }

    this.props.onFocus && this.props.onFocus(e);
  },
  touchableHandleBlur: function touchableHandleBlur(e) {
    if (Platform.isTV) {
      this._opacityInactive(250);
    }

    this.props.onBlur && this.props.onBlur(e);
  },
  touchableHandlePress: function touchableHandlePress(e) {
    this.props.onPress && this.props.onPress(e);
  },
  touchableHandleLongPress: function touchableHandleLongPress(e) {
    this.props.onLongPress && this.props.onLongPress(e);
  },
  touchableGetPressRectOffset: function touchableGetPressRectOffset() {
    return this.props.pressRetentionOffset || PRESS_RETENTION_OFFSET;
  },
  touchableGetHitSlop: function touchableGetHitSlop() {
    return this.props.hitSlop;
  },
  touchableGetHighlightDelayMS: function touchableGetHighlightDelayMS() {
    return this.props.delayPressIn || 0;
  },
  touchableGetLongPressDelayMS: function touchableGetLongPressDelayMS() {
    return this.props.delayLongPress === 0 ? 0 : this.props.delayLongPress || 500;
  },
  touchableGetPressOutDelayMS: function touchableGetPressOutDelayMS() {
    return this.props.delayPressOut;
  },
  _opacityActive: function _opacityActive(duration) {
    this.setOpacityTo(this.props.activeOpacity, duration);
  },
  _opacityInactive: function _opacityInactive(duration) {
    this.setOpacityTo(this._getChildStyleOpacityWithDefault(), duration);
  },
  _getChildStyleOpacityWithDefault: function _getChildStyleOpacityWithDefault() {
    var childStyle = flattenStyle(this.props.style) || {};
    return childStyle.opacity == null ? 1 : childStyle.opacity;
  },
  render: function render() {
    return React.createElement(Animated.View, {
      accessible: this.props.accessible !== false,
      accessibilityLabel: this.props.accessibilityLabel,
      accessibilityHint: this.props.accessibilityHint,
      accessibilityRole: this.props.accessibilityRole,
      accessibilityStates: this.props.accessibilityStates,
      style: [this.props.style, {
        opacity: this.state.anim
      }],
      nativeID: this.props.nativeID,
      testID: this.props.testID,
      onLayout: this.props.onLayout,
      isTVSelectable: true,
      hasTVPreferredFocus: this.props.hasTVPreferredFocus,
      tvParallaxProperties: this.props.tvParallaxProperties,
      hitSlop: this.props.hitSlop,
      onStartShouldSetResponder: this.touchableHandleStartShouldSetResponder,
      onResponderTerminationRequest: this.touchableHandleResponderTerminationRequest,
      onResponderGrant: this.touchableHandleResponderGrant,
      onResponderMove: this.touchableHandleResponderMove,
      onResponderRelease: this.touchableHandleResponderRelease,
      onResponderTerminate: this.touchableHandleResponderTerminate
    }, this.props.children, Touchable.renderDebugView({
      color: 'cyan',
      hitSlop: this.props.hitSlop
    }));
  }
});
module.exports = TouchableOpacity;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlRvdWNoYWJsZU9wYWNpdHkuanMiXSwibmFtZXMiOlsiQW5pbWF0ZWQiLCJyZXF1aXJlIiwiRWFzaW5nIiwiTmF0aXZlTWV0aG9kc01peGluIiwiUGxhdGZvcm0iLCJSZWFjdCIsIlByb3BUeXBlcyIsIlRvdWNoYWJsZSIsIlRvdWNoYWJsZVdpdGhvdXRGZWVkYmFjayIsImNyZWF0ZVJlYWN0Q2xhc3MiLCJlbnN1cmVQb3NpdGl2ZURlbGF5UHJvcHMiLCJmbGF0dGVuU3R5bGUiLCJQUkVTU19SRVRFTlRJT05fT0ZGU0VUIiwidG9wIiwibGVmdCIsInJpZ2h0IiwiYm90dG9tIiwiVG91Y2hhYmxlT3BhY2l0eSIsImRpc3BsYXlOYW1lIiwibWl4aW5zIiwiTWl4aW4iLCJ3aXRob3V0RGVmYXVsdEZvY3VzQW5kQmx1ciIsInByb3BUeXBlcyIsImFjdGl2ZU9wYWNpdHkiLCJudW1iZXIiLCJoYXNUVlByZWZlcnJlZEZvY3VzIiwiYm9vbCIsInR2UGFyYWxsYXhQcm9wZXJ0aWVzIiwib2JqZWN0IiwiZ2V0RGVmYXVsdFByb3BzIiwiZ2V0SW5pdGlhbFN0YXRlIiwidG91Y2hhYmxlR2V0SW5pdGlhbFN0YXRlIiwiYW5pbSIsIlZhbHVlIiwiX2dldENoaWxkU3R5bGVPcGFjaXR5V2l0aERlZmF1bHQiLCJjb21wb25lbnREaWRNb3VudCIsInByb3BzIiwiVU5TQUZFX2NvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMiLCJuZXh0UHJvcHMiLCJjb21wb25lbnREaWRVcGRhdGUiLCJwcmV2UHJvcHMiLCJwcmV2U3RhdGUiLCJkaXNhYmxlZCIsIl9vcGFjaXR5SW5hY3RpdmUiLCJzZXRPcGFjaXR5VG8iLCJ2YWx1ZSIsImR1cmF0aW9uIiwidGltaW5nIiwic3RhdGUiLCJ0b1ZhbHVlIiwiZWFzaW5nIiwiaW5PdXQiLCJxdWFkIiwidXNlTmF0aXZlRHJpdmVyIiwic3RhcnQiLCJ0b3VjaGFibGVIYW5kbGVBY3RpdmVQcmVzc0luIiwiZSIsImRpc3BhdGNoQ29uZmlnIiwicmVnaXN0cmF0aW9uTmFtZSIsIl9vcGFjaXR5QWN0aXZlIiwib25QcmVzc0luIiwidG91Y2hhYmxlSGFuZGxlQWN0aXZlUHJlc3NPdXQiLCJvblByZXNzT3V0IiwidG91Y2hhYmxlSGFuZGxlRm9jdXMiLCJpc1RWIiwib25Gb2N1cyIsInRvdWNoYWJsZUhhbmRsZUJsdXIiLCJvbkJsdXIiLCJ0b3VjaGFibGVIYW5kbGVQcmVzcyIsIm9uUHJlc3MiLCJ0b3VjaGFibGVIYW5kbGVMb25nUHJlc3MiLCJvbkxvbmdQcmVzcyIsInRvdWNoYWJsZUdldFByZXNzUmVjdE9mZnNldCIsInByZXNzUmV0ZW50aW9uT2Zmc2V0IiwidG91Y2hhYmxlR2V0SGl0U2xvcCIsImhpdFNsb3AiLCJ0b3VjaGFibGVHZXRIaWdobGlnaHREZWxheU1TIiwiZGVsYXlQcmVzc0luIiwidG91Y2hhYmxlR2V0TG9uZ1ByZXNzRGVsYXlNUyIsImRlbGF5TG9uZ1ByZXNzIiwidG91Y2hhYmxlR2V0UHJlc3NPdXREZWxheU1TIiwiZGVsYXlQcmVzc091dCIsImNoaWxkU3R5bGUiLCJzdHlsZSIsIm9wYWNpdHkiLCJyZW5kZXIiLCJhY2Nlc3NpYmxlIiwiYWNjZXNzaWJpbGl0eUxhYmVsIiwiYWNjZXNzaWJpbGl0eUhpbnQiLCJhY2Nlc3NpYmlsaXR5Um9sZSIsImFjY2Vzc2liaWxpdHlTdGF0ZXMiLCJuYXRpdmVJRCIsInRlc3RJRCIsIm9uTGF5b3V0IiwidG91Y2hhYmxlSGFuZGxlU3RhcnRTaG91bGRTZXRSZXNwb25kZXIiLCJ0b3VjaGFibGVIYW5kbGVSZXNwb25kZXJUZXJtaW5hdGlvblJlcXVlc3QiLCJ0b3VjaGFibGVIYW5kbGVSZXNwb25kZXJHcmFudCIsInRvdWNoYWJsZUhhbmRsZVJlc3BvbmRlck1vdmUiLCJ0b3VjaGFibGVIYW5kbGVSZXNwb25kZXJSZWxlYXNlIiwidG91Y2hhYmxlSGFuZGxlUmVzcG9uZGVyVGVybWluYXRlIiwiY2hpbGRyZW4iLCJyZW5kZXJEZWJ1Z1ZpZXciLCJjb2xvciIsIm1vZHVsZSIsImV4cG9ydHMi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S0FBTCxDQUFXVCxvQkFabkM7QUFhRSxNQUFBLE9BQU8sRUFBRSxLQUFLUyxLQUFMLENBQVd1QyxPQWJ0QjtBQWlCRSxNQUFBLHlCQUF5QixFQUFFLEtBQUttQixzQ0FqQmxDO0FBa0JFLE1BQUEsNkJBQTZCLEVBSTNCLEtBQUtDLDBDQXRCVDtBQTJCRSxNQUFBLGdCQUFnQixFQUFFLEtBQUtDLDZCQTNCekI7QUErQkUsTUFBQSxlQUFlLEVBQUUsS0FBS0MsNEJBL0J4QjtBQW1DRSxNQUFBLGtCQUFrQixFQUFFLEtBQUtDLCtCQW5DM0I7QUF1Q0UsTUFBQSxvQkFBb0IsRUFBRSxLQUFLQztBQXZDN0IsT0F3Q0csS0FBSy9ELEtBQUwsQ0FBV2dFLFFBeENkLEVBeUNHN0YsU0FBUyxDQUFDOEYsZUFBVixDQUEwQjtBQUN6QkMsTUFBQUEsS0FBSyxFQUFFLE1BRGtCO0FBRXpCM0IsTUFBQUEsT0FBTyxFQUFFLEtBQUt2QyxLQUFMLENBQVd1QztBQUZLLEtBQTFCLENBekNILENBREY7QUFnREQ7QUFwTXlDLENBQUQsQ0FBM0M7QUF1TUE0QixNQUFNLENBQUNDLE9BQVAsR0FBaUJ2RixnQkFBakIiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENvcHlyaWdodCAoYykgRmFjZWJvb2ssIEluYy4gYW5kIGl0cyBhZmZpbGlhdGVzLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuICpcbiAqIEBmb3JtYXRcbiAqIEBmbG93XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG5jb25zdCBBbmltYXRlZCA9IHJlcXVpcmUoJy4uLy4uL0FuaW1hdGVkL3NyYy9BbmltYXRlZCcpO1xuY29uc3QgRWFzaW5nID0gcmVxdWlyZSgnLi4vLi4vQW5pbWF0ZWQvc3JjL0Vhc2luZycpO1xuY29uc3QgTmF0aXZlTWV0aG9kc01peGluID0gcmVxdWlyZSgnLi4vLi4vUmVuZGVyZXIvc2hpbXMvTmF0aXZlTWV0aG9kc01peGluJyk7XG5jb25zdCBQbGF0Zm9ybSA9IHJlcXVpcmUoJy4uLy4uL1V0aWxpdGllcy9QbGF0Zm9ybScpO1xuY29uc3QgUmVhY3QgPSByZXF1aXJlKCdyZWFjdCcpO1xuY29uc3QgUHJvcFR5cGVzID0gcmVxdWlyZSgncHJvcC10eXBlcycpO1xuY29uc3QgVG91Y2hhYmxlID0gcmVxdWlyZSgnLi9Ub3VjaGFibGUnKTtcbmNvbnN0IFRvdWNoYWJsZVdpdGhvdXRGZWVkYmFjayA9IHJlcXVpcmUoJy4vVG91Y2hhYmxlV2l0aG91dEZlZWRiYWNrJyk7XG5cbmNvbnN0IGNyZWF0ZVJlYWN0Q2xhc3MgPSByZXF1aXJlKCdjcmVhdGUtcmVhY3QtY2xhc3MnKTtcbmNvbnN0IGVuc3VyZVBvc2l0aXZlRGVsYXlQcm9wcyA9IHJlcXVpcmUoJy4vZW5zdXJlUG9zaXRpdmVEZWxheVByb3BzJyk7XG5jb25zdCBmbGF0dGVuU3R5bGUgPSByZXF1aXJlKCcuLi8uLi9TdHlsZVNoZWV0L2ZsYXR0ZW5TdHlsZScpO1xuXG5pbXBvcnQgdHlwZSB7UHJvcHMgYXMgVG91Y2hhYmxlV2l0aG91dEZlZWRiYWNrUHJvcHN9IGZyb20gJy4vVG91Y2hhYmxlV2l0aG91dEZlZWRiYWNrJztcbmltcG9ydCB0eXBlIHtWaWV3U3R5bGVQcm9wfSBmcm9tICcuLi8uLi9TdHlsZVNoZWV0L1N0eWxlU2hlZXQnO1xuaW1wb3J0IHR5cGUge1RWUGFyYWxsYXhQcm9wZXJ0aWVzVHlwZX0gZnJvbSAnLi4vQXBwbGVUVi9UVlZpZXdQcm9wVHlwZXMnO1xuaW1wb3J0IHR5cGUge1ByZXNzRXZlbnR9IGZyb20gJy4uLy4uL1R5cGVzL0NvcmVFdmVudFR5cGVzJztcblxuY29uc3QgUFJFU1NfUkVURU5USU9OX09GRlNFVCA9IHt0b3A6IDIwLCBsZWZ0OiAyMCwgcmlnaHQ6IDIwLCBib3R0b206IDMwfTtcblxudHlwZSBUVlByb3BzID0gJFJlYWRPbmx5PHt8XG4gIGhhc1RWUHJlZmVycmVkRm9jdXM/OiA/Ym9vbGVhbixcbiAgdHZQYXJhbGxheFByb3BlcnRpZXM/OiA/VFZQYXJhbGxheFByb3BlcnRpZXNUeXBlLFxufH0+O1xuXG50eXBlIFByb3BzID0gJFJlYWRPbmx5PHt8XG4gIC4uLlRvdWNoYWJsZVdpdGhvdXRGZWVkYmFja1Byb3BzLFxuICAuLi5UVlByb3BzLFxuICBhY3RpdmVPcGFjaXR5PzogP251bWJlcixcbiAgc3R5bGU/OiA/Vmlld1N0eWxlUHJvcCxcbnx9PjtcblxuLyoqXG4gKiBBIHdyYXBwZXIgZm9yIG1ha2luZyB2aWV3cyByZXNwb25kIHByb3Blcmx5IHRvIHRvdWNoZXMuXG4gKiBPbiBwcmVzcyBkb3duLCB0aGUgb3BhY2l0eSBvZiB0aGUgd3JhcHBlZCB2aWV3IGlzIGRlY3JlYXNlZCwgZGltbWluZyBpdC5cbiAqXG4gKiBPcGFjaXR5IGlzIGNvbnRyb2xsZWQgYnkgd3JhcHBpbmcgdGhlIGNoaWxkcmVuIGluIGFuIEFuaW1hdGVkLlZpZXcsIHdoaWNoIGlzXG4gKiBhZGRlZCB0byB0aGUgdmlldyBoaWVhcmNoeS4gIEJlIGF3YXJlIHRoYXQgdGhpcyBjYW4gYWZmZWN0IGxheW91dC5cbiAqXG4gKiBFeGFtcGxlOlxuICpcbiAqIGBgYFxuICogcmVuZGVyQnV0dG9uOiBmdW5jdGlvbigpIHtcbiAqICAgcmV0dXJuIChcbiAqICAgICA8VG91Y2hhYmxlT3BhY2l0eSBvblByZXNzPXt0aGlzLl9vblByZXNzQnV0dG9ufT5cbiAqICAgICAgIDxJbWFnZVxuICogICAgICAgICBzdHlsZT17c3R5bGVzLmJ1dHRvbn1cbiAqICAgICAgICAgc291cmNlPXtyZXF1aXJlKCcuL215QnV0dG9uLnBuZycpfVxuICogICAgICAgLz5cbiAqICAgICA8L1RvdWNoYWJsZU9wYWNpdHk+XG4gKiAgICk7XG4gKiB9LFxuICogYGBgXG4gKiAjIyMgRXhhbXBsZVxuICpcbiAqIGBgYFJlYWN0TmF0aXZlV2ViUGxheWVyXG4gKiBpbXBvcnQgUmVhY3QsIHsgQ29tcG9uZW50IH0gZnJvbSAncmVhY3QnXG4gKiBpbXBvcnQge1xuICogICBBcHBSZWdpc3RyeSxcbiAqICAgU3R5bGVTaGVldCxcbiAqICAgVG91Y2hhYmxlT3BhY2l0eSxcbiAqICAgVGV4dCxcbiAqICAgVmlldyxcbiAqIH0gZnJvbSAncmVhY3QtbmF0aXZlJ1xuICpcbiAqIGNsYXNzIEFwcCBleHRlbmRzIENvbXBvbmVudCB7XG4gKiAgIGNvbnN0cnVjdG9yKHByb3BzKSB7XG4gKiAgICAgc3VwZXIocHJvcHMpXG4gKiAgICAgdGhpcy5zdGF0ZSA9IHsgY291bnQ6IDAgfVxuICogICB9XG4gKlxuICogICBvblByZXNzID0gKCkgPT4ge1xuICogICAgIHRoaXMuc2V0U3RhdGUoe1xuICogICAgICAgY291bnQ6IHRoaXMuc3RhdGUuY291bnQrMVxuICogICAgIH0pXG4gKiAgIH1cbiAqXG4gKiAgcmVuZGVyKCkge1xuICogICAgcmV0dXJuIChcbiAqICAgICAgPFZpZXcgc3R5bGU9e3N0eWxlcy5jb250YWluZXJ9PlxuICogICAgICAgIDxUb3VjaGFibGVPcGFjaXR5XG4gKiAgICAgICAgICBzdHlsZT17c3R5bGVzLmJ1dHRvbn1cbiAqICAgICAgICAgIG9uUHJlc3M9e3RoaXMub25QcmVzc31cbiAqICAgICAgICA+XG4gKiAgICAgICAgICA8VGV4dD4gVG91Y2ggSGVyZSA8L1RleHQ+XG4gKiAgICAgICAgPC9Ub3VjaGFibGVPcGFjaXR5PlxuICogICAgICAgIDxWaWV3IHN0eWxlPXtbc3R5bGVzLmNvdW50Q29udGFpbmVyXX0+XG4gKiAgICAgICAgICA8VGV4dCBzdHlsZT17W3N0eWxlcy5jb3VudFRleHRdfT5cbiAqICAgICAgICAgICAgIHsgdGhpcy5zdGF0ZS5jb3VudCAhPT0gMCA/IHRoaXMuc3RhdGUuY291bnQ6IG51bGx9XG4gKiAgICAgICAgICAgPC9UZXh0PlxuICogICAgICAgICA8L1ZpZXc+XG4gKiAgICAgICA8L1ZpZXc+XG4gKiAgICAgKVxuICogICB9XG4gKiB9XG4gKlxuICogY29uc3Qgc3R5bGVzID0gU3R5bGVTaGVldC5jcmVhdGUoe1xuICogICBjb250YWluZXI6IHtcbiAqICAgICBmbGV4OiAxLFxuICogICAgIGp1c3RpZnlDb250ZW50OiAnY2VudGVyJyxcbiAqICAgICBwYWRkaW5nSG9yaXpvbnRhbDogMTBcbiAqICAgfSxcbiAqICAgYnV0dG9uOiB7XG4gKiAgICAgYWxpZ25JdGVtczogJ2NlbnRlcicsXG4gKiAgICAgYmFja2dyb3VuZENvbG9yOiAnI0RERERERCcsXG4gKiAgICAgcGFkZGluZzogMTBcbiAqICAgfSxcbiAqICAgY291bnRDb250YWluZXI6IHtcbiAqICAgICBhbGlnbkl0ZW1zOiAnY2VudGVyJyxcbiAqICAgICBwYWRkaW5nOiAxMFxuICogICB9LFxuICogICBjb3VudFRleHQ6IHtcbiAqICAgICBjb2xvcjogJyNGRjAwRkYnXG4gKiAgIH1cbiAqIH0pXG4gKlxuICogQXBwUmVnaXN0cnkucmVnaXN0ZXJDb21wb25lbnQoJ0FwcCcsICgpID0+IEFwcClcbiAqIGBgYFxuICpcbiAqL1xuY29uc3QgVG91Y2hhYmxlT3BhY2l0eSA9ICgoY3JlYXRlUmVhY3RDbGFzcyh7XG4gIGRpc3BsYXlOYW1lOiAnVG91Y2hhYmxlT3BhY2l0eScsXG4gIG1peGluczogW1RvdWNoYWJsZS5NaXhpbi53aXRob3V0RGVmYXVsdEZvY3VzQW5kQmx1ciwgTmF0aXZlTWV0aG9kc01peGluXSxcblxuICBwcm9wVHlwZXM6IHtcbiAgICAvKiAkRmxvd0ZpeE1lKD49MC44OS4wIHNpdGU9cmVhY3RfbmF0aXZlX2ZiKSBUaGlzIGNvbW1lbnQgc3VwcHJlc3NlcyBhblxuICAgICAqIGVycm9yIGZvdW5kIHdoZW4gRmxvdyB2MC44OSB3YXMgZGVwbG95ZWQuIFRvIHNlZSB0aGUgZXJyb3IsIGRlbGV0ZSB0aGlzXG4gICAgICogY29tbWVudCBhbmQgcnVuIEZsb3cuICovXG4gICAgLi4uVG91Y2hhYmxlV2l0aG91dEZlZWRiYWNrLnByb3BUeXBlcyxcbiAgICAvKipcbiAgICAgKiBEZXRlcm1pbmVzIHdoYXQgdGhlIG9wYWNpdHkgb2YgdGhlIHdyYXBwZWQgdmlldyBzaG91bGQgYmUgd2hlbiB0b3VjaCBpc1xuICAgICAqIGFjdGl2ZS4gRGVmYXVsdHMgdG8gMC4yLlxuICAgICAqL1xuICAgIGFjdGl2ZU9wYWNpdHk6IFByb3BUeXBlcy5udW1iZXIsXG4gICAgLyoqXG4gICAgICogVFYgcHJlZmVycmVkIGZvY3VzIChzZWUgZG9jdW1lbnRhdGlvbiBmb3IgdGhlIFZpZXcgY29tcG9uZW50KS5cbiAgICAgKi9cbiAgICBoYXNUVlByZWZlcnJlZEZvY3VzOiBQcm9wVHlwZXMuYm9vbCxcbiAgICAvKipcbiAgICAgKiBBcHBsZSBUViBwYXJhbGxheCBlZmZlY3RzXG4gICAgICovXG4gICAgdHZQYXJhbGxheFByb3BlcnRpZXM6IFByb3BUeXBlcy5vYmplY3QsXG4gIH0sXG5cbiAgZ2V0RGVmYXVsdFByb3BzOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgYWN0aXZlT3BhY2l0eTogMC4yLFxuICAgIH07XG4gIH0sXG5cbiAgZ2V0SW5pdGlhbFN0YXRlOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgLyogJEZsb3dGaXhNZSg+PTAuODkuMCBzaXRlPXJlYWN0X25hdGl2ZV9mYikgVGhpcyBjb21tZW50IHN1cHByZXNzZXMgYW5cbiAgICAgICAqIGVycm9yIGZvdW5kIHdoZW4gRmxvdyB2MC44OSB3YXMgZGVwbG95ZWQuIFRvIHNlZSB0aGUgZXJyb3IsIGRlbGV0ZVxuICAgICAgICogdGhpcyBjb21tZW50IGFuZCBydW4gRmxvdy4gKi9cbiAgICAgIC4uLnRoaXMudG91Y2hhYmxlR2V0SW5pdGlhbFN0YXRlKCksXG4gICAgICAvKiAkRmxvd0ZpeE1lKD49MC44OS4wIHNpdGU9cmVhY3RfbmF0aXZlX2ZiKSBUaGlzIGNvbW1lbnQgc3VwcHJlc3NlcyBhblxuICAgICAgICogZXJyb3IgZm91bmQgd2hlbiBGbG93IHYwLjg5IHdhcyBkZXBsb3llZC4gVG8gc2VlIHRoZSBlcnJvciwgZGVsZXRlXG4gICAgICAgKiB0aGlzIGNvbW1lbnQgYW5kIHJ1biBGbG93LiAqL1xuICAgICAgYW5pbTogbmV3IEFuaW1hdGVkLlZhbHVlKHRoaXMuX2dldENoaWxkU3R5bGVPcGFjaXR5V2l0aERlZmF1bHQoKSksXG4gICAgfTtcbiAgfSxcblxuICBjb21wb25lbnREaWRNb3VudDogZnVuY3Rpb24oKSB7XG4gICAgZW5zdXJlUG9zaXRpdmVEZWxheVByb3BzKHRoaXMucHJvcHMpO1xuICB9LFxuXG4gIFVOU0FGRV9jb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzOiBmdW5jdGlvbihuZXh0UHJvcHMpIHtcbiAgICBlbnN1cmVQb3NpdGl2ZURlbGF5UHJvcHMobmV4dFByb3BzKTtcbiAgfSxcblxuICBjb21wb25lbnREaWRVcGRhdGU6IGZ1bmN0aW9uKHByZXZQcm9wcywgcHJldlN0YXRlKSB7XG4gICAgaWYgKHRoaXMucHJvcHMuZGlzYWJsZWQgIT09IHByZXZQcm9wcy5kaXNhYmxlZCkge1xuICAgICAgdGhpcy5fb3BhY2l0eUluYWN0aXZlKDI1MCk7XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBBbmltYXRlIHRoZSB0b3VjaGFibGUgdG8gYSBuZXcgb3BhY2l0eS5cbiAgICovXG4gIHNldE9wYWNpdHlUbzogZnVuY3Rpb24odmFsdWU6IG51bWJlciwgZHVyYXRpb246IG51bWJlcikge1xuICAgIEFuaW1hdGVkLnRpbWluZyh0aGlzLnN0YXRlLmFuaW0sIHtcbiAgICAgIHRvVmFsdWU6IHZhbHVlLFxuICAgICAgZHVyYXRpb246IGR1cmF0aW9uLFxuICAgICAgZWFzaW5nOiBFYXNpbmcuaW5PdXQoRWFzaW5nLnF1YWQpLFxuICAgICAgdXNlTmF0aXZlRHJpdmVyOiB0cnVlLFxuICAgIH0pLnN0YXJ0KCk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIGBUb3VjaGFibGUuTWl4aW5gIHNlbGYgY2FsbGJhY2tzLiBUaGUgbWl4aW4gd2lsbCBpbnZva2UgdGhlc2UgaWYgdGhleSBhcmVcbiAgICogZGVmaW5lZCBvbiB5b3VyIGNvbXBvbmVudC5cbiAgICovXG4gIHRvdWNoYWJsZUhhbmRsZUFjdGl2ZVByZXNzSW46IGZ1bmN0aW9uKGU6IFByZXNzRXZlbnQpIHtcbiAgICBpZiAoZS5kaXNwYXRjaENvbmZpZy5yZWdpc3RyYXRpb25OYW1lID09PSAnb25SZXNwb25kZXJHcmFudCcpIHtcbiAgICAgIHRoaXMuX29wYWNpdHlBY3RpdmUoMCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX29wYWNpdHlBY3RpdmUoMTUwKTtcbiAgICB9XG4gICAgdGhpcy5wcm9wcy5vblByZXNzSW4gJiYgdGhpcy5wcm9wcy5vblByZXNzSW4oZSk7XG4gIH0sXG5cbiAgdG91Y2hhYmxlSGFuZGxlQWN0aXZlUHJlc3NPdXQ6IGZ1bmN0aW9uKGU6IFByZXNzRXZlbnQpIHtcbiAgICB0aGlzLl9vcGFjaXR5SW5hY3RpdmUoMjUwKTtcbiAgICB0aGlzLnByb3BzLm9uUHJlc3NPdXQgJiYgdGhpcy5wcm9wcy5vblByZXNzT3V0KGUpO1xuICB9LFxuXG4gIHRvdWNoYWJsZUhhbmRsZUZvY3VzOiBmdW5jdGlvbihlOiBFdmVudCkge1xuICAgIGlmIChQbGF0Zm9ybS5pc1RWKSB7XG4gICAgICB0aGlzLl9vcGFjaXR5QWN0aXZlKDE1MCk7XG4gICAgfVxuICAgIHRoaXMucHJvcHMub25Gb2N1cyAmJiB0aGlzLnByb3BzLm9uRm9jdXMoZSk7XG4gIH0sXG5cbiAgdG91Y2hhYmxlSGFuZGxlQmx1cjogZnVuY3Rpb24oZTogRXZlbnQpIHtcbiAgICBpZiAoUGxhdGZvcm0uaXNUVikge1xuICAgICAgdGhpcy5fb3BhY2l0eUluYWN0aXZlKDI1MCk7XG4gICAgfVxuICAgIHRoaXMucHJvcHMub25CbHVyICYmIHRoaXMucHJvcHMub25CbHVyKGUpO1xuICB9LFxuXG4gIHRvdWNoYWJsZUhhbmRsZVByZXNzOiBmdW5jdGlvbihlOiBQcmVzc0V2ZW50KSB7XG4gICAgdGhpcy5wcm9wcy5vblByZXNzICYmIHRoaXMucHJvcHMub25QcmVzcyhlKTtcbiAgfSxcblxuICB0b3VjaGFibGVIYW5kbGVMb25nUHJlc3M6IGZ1bmN0aW9uKGU6IFByZXNzRXZlbnQpIHtcbiAgICB0aGlzLnByb3BzLm9uTG9uZ1ByZXNzICYmIHRoaXMucHJvcHMub25Mb25nUHJlc3MoZSk7XG4gIH0sXG5cbiAgdG91Y2hhYmxlR2V0UHJlc3NSZWN0T2Zmc2V0OiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5wcm9wcy5wcmVzc1JldGVudGlvbk9mZnNldCB8fCBQUkVTU19SRVRFTlRJT05fT0ZGU0VUO1xuICB9LFxuXG4gIHRvdWNoYWJsZUdldEhpdFNsb3A6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLnByb3BzLmhpdFNsb3A7XG4gIH0sXG5cbiAgdG91Y2hhYmxlR2V0SGlnaGxpZ2h0RGVsYXlNUzogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMucHJvcHMuZGVsYXlQcmVzc0luIHx8IDA7XG4gIH0sXG5cbiAgdG91Y2hhYmxlR2V0TG9uZ1ByZXNzRGVsYXlNUzogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMucHJvcHMuZGVsYXlMb25nUHJlc3MgPT09IDBcbiAgICAgID8gMFxuICAgICAgOiB0aGlzLnByb3BzLmRlbGF5TG9uZ1ByZXNzIHx8IDUwMDtcbiAgfSxcblxuICB0b3VjaGFibGVHZXRQcmVzc091dERlbGF5TVM6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLnByb3BzLmRlbGF5UHJlc3NPdXQ7XG4gIH0sXG5cbiAgX29wYWNpdHlBY3RpdmU6IGZ1bmN0aW9uKGR1cmF0aW9uOiBudW1iZXIpIHtcbiAgICB0aGlzLnNldE9wYWNpdHlUbyh0aGlzLnByb3BzLmFjdGl2ZU9wYWNpdHksIGR1cmF0aW9uKTtcbiAgfSxcblxuICBfb3BhY2l0eUluYWN0aXZlOiBmdW5jdGlvbihkdXJhdGlvbjogbnVtYmVyKSB7XG4gICAgLyogJEZsb3dGaXhNZSg+PTAuODkuMCBzaXRlPXJlYWN0X25hdGl2ZV9mYikgVGhpcyBjb21tZW50IHN1cHByZXNzZXMgYW5cbiAgICAgKiBlcnJvciBmb3VuZCB3aGVuIEZsb3cgdjAuODkgd2FzIGRlcGxveWVkLiBUbyBzZWUgdGhlIGVycm9yLCBkZWxldGUgdGhpc1xuICAgICAqIGNvbW1lbnQgYW5kIHJ1biBGbG93LiAqL1xuICAgIHRoaXMuc2V0T3BhY2l0eVRvKHRoaXMuX2dldENoaWxkU3R5bGVPcGFjaXR5V2l0aERlZmF1bHQoKSwgZHVyYXRpb24pO1xuICB9LFxuXG4gIF9nZXRDaGlsZFN0eWxlT3BhY2l0eVdpdGhEZWZhdWx0OiBmdW5jdGlvbigpIHtcbiAgICBjb25zdCBjaGlsZFN0eWxlID0gZmxhdHRlblN0eWxlKHRoaXMucHJvcHMuc3R5bGUpIHx8IHt9O1xuICAgIHJldHVybiBjaGlsZFN0eWxlLm9wYWNpdHkgPT0gbnVsbCA/IDEgOiBjaGlsZFN0eWxlLm9wYWNpdHk7XG4gIH0sXG5cbiAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gKFxuICAgICAgPEFuaW1hdGVkLlZpZXdcbiAgICAgICAgYWNjZXNzaWJsZT17dGhpcy5wcm9wcy5hY2Nlc3NpYmxlICE9PSBmYWxzZX1cbiAgICAgICAgYWNjZXNzaWJpbGl0eUxhYmVsPXt0aGlzLnByb3BzLmFjY2Vzc2liaWxpdHlMYWJlbH1cbiAgICAgICAgYWNjZXNzaWJpbGl0eUhpbnQ9e3RoaXMucHJvcHMuYWNjZXNzaWJpbGl0eUhpbnR9XG4gICAgICAgIGFjY2Vzc2liaWxpdHlSb2xlPXt0aGlzLnByb3BzLmFjY2Vzc2liaWxpdHlSb2xlfVxuICAgICAgICBhY2Nlc3NpYmlsaXR5U3RhdGVzPXt0aGlzLnByb3BzLmFjY2Vzc2liaWxpdHlTdGF0ZXN9XG4gICAgICAgIHN0eWxlPXtbdGhpcy5wcm9wcy5zdHlsZSwge29wYWNpdHk6IHRoaXMuc3RhdGUuYW5pbX1dfVxuICAgICAgICBuYXRpdmVJRD17dGhpcy5wcm9wcy5uYXRpdmVJRH1cbiAgICAgICAgdGVzdElEPXt0aGlzLnByb3BzLnRlc3RJRH1cbiAgICAgICAgb25MYXlvdXQ9e3RoaXMucHJvcHMub25MYXlvdXR9XG4gICAgICAgIGlzVFZTZWxlY3RhYmxlPXt0cnVlfVxuICAgICAgICBoYXNUVlByZWZlcnJlZEZvY3VzPXt0aGlzLnByb3BzLmhhc1RWUHJlZmVycmVkRm9jdXN9XG4gICAgICAgIHR2UGFyYWxsYXhQcm9wZXJ0aWVzPXt0aGlzLnByb3BzLnR2UGFyYWxsYXhQcm9wZXJ0aWVzfVxuICAgICAgICBoaXRTbG9wPXt0aGlzLnByb3BzLmhpdFNsb3B9XG4gICAgICAgIC8qICRGbG93Rml4TWUoPj0wLjg5LjAgc2l0ZT1yZWFjdF9uYXRpdmVfZmIpIFRoaXMgY29tbWVudCBzdXBwcmVzc2VzIGFuXG4gICAgICAgICAqIGVycm9yIGZvdW5kIHdoZW4gRmxvdyB2MC44OSB3YXMgZGVwbG95ZWQuIFRvIHNlZSB0aGUgZXJyb3IsIGRlbGV0ZVxuICAgICAgICAgKiB0aGlzIGNvbW1lbnQgYW5kIHJ1biBGbG93LiAqL1xuICAgICAgICBvblN0YXJ0U2hvdWxkU2V0UmVzcG9uZGVyPXt0aGlzLnRvdWNoYWJsZUhhbmRsZVN0YXJ0U2hvdWxkU2V0UmVzcG9uZGVyfVxuICAgICAgICBvblJlc3BvbmRlclRlcm1pbmF0aW9uUmVxdWVzdD17XG4gICAgICAgICAgLyogJEZsb3dGaXhNZSg+PTAuODkuMCBzaXRlPXJlYWN0X25hdGl2ZV9mYikgVGhpcyBjb21tZW50IHN1cHByZXNzZXNcbiAgICAgICAgICAgKiBhbiBlcnJvciBmb3VuZCB3aGVuIEZsb3cgdjAuODkgd2FzIGRlcGxveWVkLiBUbyBzZWUgdGhlIGVycm9yLFxuICAgICAgICAgICAqIGRlbGV0ZSB0aGlzIGNvbW1lbnQgYW5kIHJ1biBGbG93LiAqL1xuICAgICAgICAgIHRoaXMudG91Y2hhYmxlSGFuZGxlUmVzcG9uZGVyVGVybWluYXRpb25SZXF1ZXN0XG4gICAgICAgIH1cbiAgICAgICAgLyogJEZsb3dGaXhNZSg+PTAuODkuMCBzaXRlPXJlYWN0X25hdGl2ZV9mYikgVGhpcyBjb21tZW50IHN1cHByZXNzZXMgYW5cbiAgICAgICAgICogZXJyb3IgZm91bmQgd2hlbiBGbG93IHYwLjg5IHdhcyBkZXBsb3llZC4gVG8gc2VlIHRoZSBlcnJvciwgZGVsZXRlXG4gICAgICAgICAqIHRoaXMgY29tbWVudCBhbmQgcnVuIEZsb3cuICovXG4gICAgICAgIG9uUmVzcG9uZGVyR3JhbnQ9e3RoaXMudG91Y2hhYmxlSGFuZGxlUmVzcG9uZGVyR3JhbnR9XG4gICAgICAgIC8qICRGbG93Rml4TWUoPj0wLjg5LjAgc2l0ZT1yZWFjdF9uYXRpdmVfZmIpIFRoaXMgY29tbWVudCBzdXBwcmVzc2VzIGFuXG4gICAgICAgICAqIGVycm9yIGZvdW5kIHdoZW4gRmxvdyB2MC44OSB3YXMgZGVwbG95ZWQuIFRvIHNlZSB0aGUgZXJyb3IsIGRlbGV0ZVxuICAgICAgICAgKiB0aGlzIGNvbW1lbnQgYW5kIHJ1biBGbG93LiAqL1xuICAgICAgICBvblJlc3BvbmRlck1vdmU9e3RoaXMudG91Y2hhYmxlSGFuZGxlUmVzcG9uZGVyTW92ZX1cbiAgICAgICAgLyogJEZsb3dGaXhNZSg+PTAuODkuMCBzaXRlPXJlYWN0X25hdGl2ZV9mYikgVGhpcyBjb21tZW50IHN1cHByZXNzZXMgYW5cbiAgICAgICAgICogZXJyb3IgZm91bmQgd2hlbiBGbG93IHYwLjg5IHdhcyBkZXBsb3llZC4gVG8gc2VlIHRoZSBlcnJvciwgZGVsZXRlXG4gICAgICAgICAqIHRoaXMgY29tbWVudCBhbmQgcnVuIEZsb3cuICovXG4gICAgICAgIG9uUmVzcG9uZGVyUmVsZWFzZT17dGhpcy50b3VjaGFibGVIYW5kbGVSZXNwb25kZXJSZWxlYXNlfVxuICAgICAgICAvKiAkRmxvd0ZpeE1lKD49MC44OS4wIHNpdGU9cmVhY3RfbmF0aXZlX2ZiKSBUaGlzIGNvbW1lbnQgc3VwcHJlc3NlcyBhblxuICAgICAgICAgKiBlcnJvciBmb3VuZCB3aGVuIEZsb3cgdjAuODkgd2FzIGRlcGxveWVkLiBUbyBzZWUgdGhlIGVycm9yLCBkZWxldGVcbiAgICAgICAgICogdGhpcyBjb21tZW50IGFuZCBydW4gRmxvdy4gKi9cbiAgICAgICAgb25SZXNwb25kZXJUZXJtaW5hdGU9e3RoaXMudG91Y2hhYmxlSGFuZGxlUmVzcG9uZGVyVGVybWluYXRlfT5cbiAgICAgICAge3RoaXMucHJvcHMuY2hpbGRyZW59XG4gICAgICAgIHtUb3VjaGFibGUucmVuZGVyRGVidWdWaWV3KHtcbiAgICAgICAgICBjb2xvcjogJ2N5YW4nLFxuICAgICAgICAgIGhpdFNsb3A6IHRoaXMucHJvcHMuaGl0U2xvcCxcbiAgICAgICAgfSl9XG4gICAgICA8L0FuaW1hdGVkLlZpZXc+XG4gICAgKTtcbiAgfSxcbn0pOiBhbnkpOiBSZWFjdC5Db21wb25lbnRUeXBlPFByb3BzPik7XG5cbm1vZHVsZS5leHBvcnRzID0gVG91Y2hhYmxlT3BhY2l0eTtcbiJdfQ==